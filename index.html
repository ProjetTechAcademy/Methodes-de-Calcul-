<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bo√Æte √† Outils : M√©thodes de Calcul en Paie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fefce8;
            color: #4a5568;
        }
        .container {
            max-width: 900px;
        }
        .accordion-item {
            background-color: #fff;
            border-radius: 1rem;
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.05);
            border: 1px solid #fecdd3;
        }
        .accordion-header {
            cursor: pointer;
            padding: 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #fecdd3;
            transition: background-color 0.2s ease-in-out;
        }
        .accordion-header:hover {
            background-color: #ffe4e6;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            padding: 0 1.25rem;
        }
        .accordion-content.active {
            max-height: 500px;
            overflow-y: auto;
            padding: 1.25rem;
        }
        .chevron-down {
            transition: transform 0.3s ease;
        }
        .accordion-item.active .chevron-down {
            transform: rotate(180deg);
        }
        .prose h4 {
            font-weight: 600;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        .prose p {
            margin-bottom: 0.5rem;
        }
        .test-section {
            background-color: #fcf6e8;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 0.5rem;
        }
        .justification-box {
            background-color: #f3e8ff;
            border-left: 4px solid #a855f7;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.5rem;
        }
        .test-input {
            width: 100%;
            padding: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
            margin-top: 0.5rem;
        }
        .test-button {
            background-color: #f59e0b;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            margin-top: 1rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .test-button:hover {
            background-color: #d97706;
        }
        .test-result {
            margin-top: 1rem;
            font-weight: 600;
            color: #d97706;
        }
        table {
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.5rem;
            text-align: left;
        }
    </style>
</head>
<body class="p-6">

    <div class="container mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-pink-700 mb-2">
                Bo√Æte √† Outils : M√©thodes de Calcul üßÆ
            </h1>
            <p class="text-lg sm:text-xl text-gray-600 font-medium">
                Un recueil des formules et des exemples pour ma√Ætriser les calculs cl√©s en paie.
            </p>
            <hr class="w-24 h-1 mx-auto my-4 bg-orange-400 border-0 rounded">
        </header>

        <main class="space-y-6">

            <!-- Section 1: Salaire de base et horaire -->
            <div class="accordion-item" id="accordion-item-1">
                <div class="accordion-header flex justify-between items-center bg-stone-50 hover:bg-stone-100">
                    <h3 class="text-xl font-bold text-stone-700">1. Salaire de base et horaire</h3>
                    <svg class="chevron-down w-6 h-6 text-stone-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="accordion-content">
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-stone-700">Dur√©e mensuelle moyenne</h4>
                        <p>La dur√©e l√©gale du travail est de 35 heures par semaine. Pour obtenir une moyenne mensuelle, on applique la formule de mensualisation :</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            (Heures Hebdomadaires x 52 Semaines) / 12 Mois
                        </p>
                        <p><strong>Exemple :</strong> Pour un contrat de 35h/semaine : (35 x 52) / 12 = 151,67 heures.</p>
                        <hr>
                        <h4 class="font-bold text-stone-700">Salaire de base</h4>
                        <p>Le salaire de base est le montant fixe que per√ßoit un salari√©. Il se calcule en multipliant son horaire mensuel par son taux horaire.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Horaire Mensuel Moyen x Taux Horaire
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Heures hebdomadaires:</label>
                            <input type="number" id="heures-hebdo" class="test-input" value="35">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Taux horaire (‚Ç¨):</label>
                            <input type="number" id="taux-horaire" class="test-input" value="13">
                            <button onclick="calculerSalaire()" class="test-button">Calculer le salaire de base</button>
                            <div id="resultat-salaire" class="test-result"></div>
                            <div id="justification-salaire" class="justification-box hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Heures compl√©mentaires et suppl√©mentaires -->
            <div class="accordion-item" id="accordion-item-2">
                <div class="accordion-header flex justify-between items-center bg-yellow-50 hover:bg-yellow-100">
                    <h3 class="text-xl font-bold text-yellow-700">2. Heures compl√©mentaires et suppl√©mentaires</h3>
                    <svg class="chevron-down w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="accordion-content">
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-yellow-700">Heures compl√©mentaires (temps partiel)</h4>
                        <p>Elles sont effectu√©es au-del√† du contrat, mais en de√ß√† des 35h. Elles sont major√©es selon la loi :</p>
                        <ul class="list-disc list-inside">
                            <li>Jusqu'√† 10% de la dur√©e contractuelle : majoration de 10%.</li>
                            <li>Au-del√† de 10% et jusqu'√† 1/3 de la dur√©e contractuelle : majoration de 25%.</li>
                        </ul>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            R√©mun√©ration HC major√©es = Nombre d'heures x Taux Horaire x Taux de majoration
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Heures contractuelles hebdomadaires:</label>
                            <input type="number" id="heures-contractuelles" class="test-input" value="28">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Taux horaire (‚Ç¨):</label>
                            <input type="number" id="taux-horaire-hc" class="test-input" value="14">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre d'heures compl√©mentaires:</label>
                            <input type="number" id="nombre-hc" class="test-input" value="4">
                            <button onclick="calculerHeuresComplementaires()" class="test-button">Calculer les heures compl√©mentaires</button>
                            <div id="resultat-hc" class="test-result"></div>
                            <div id="justification-hc" class="justification-box hidden"></div>
                        </div>
                        <hr>
                        <h4 class="font-bold text-yellow-700">Heures suppl√©mentaires (temps plein)</h4>
                        <p>Elles sont effectu√©es au-del√† de 35h. La majoration l√©gale est :</p>
                        <ul class="list-disc list-inside">
                            <li>De la 36√®me √† la 43√®me heure : majoration de 25%.</li>
                            <li>√Ä partir de la 44√®me heure : majoration de 50%.</li>
                        </ul>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            R√©mun√©ration HS major√©es = Nombre d'heures x Taux Horaire x Taux de majoration
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Heures totales travaill√©es:</label>
                            <input type="number" id="heures-totales-hs" class="test-input" value="40">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Taux horaire (‚Ç¨):</label>
                            <input type="number" id="taux-horaire-hs" class="test-input" value="15">
                            <button onclick="calculerHeuresSupplementaires()" class="test-button">Calculer les heures suppl√©mentaires</button>
                            <div id="resultat-hs" class="test-result"></div>
                            <div id="justification-hs" class="justification-box hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: M√©thodes de d√©compte des absences -->
            <div class="accordion-item" id="accordion-item-3">
                <div class="accordion-header flex justify-between items-center bg-orange-50 hover:bg-orange-100">
                    <h3 class="text-xl font-bold text-orange-700">3. M√©thodes de d√©compte des absences</h3>
                    <svg class="chevron-down w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="accordion-content">
                    <!-- Heures r√©elles -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 1 : Heures r√©elles du mois (recommand√©e par la jurisprudence)</h4>
                        <p>Cette m√©thode, valid√©e par la Cour de cassation, est la plus juste car elle respecte la proportionnalit√© entre le temps non travaill√© et le salaire.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Heures d'absence / Heures r√©ellement pr√©vues dans le mois)
                        </p>
                        <p><strong>Explication :</strong> On divise le salaire par le nombre d'heures qui auraient d√ª √™tre travaill√©es ce mois-ci, puis on multiplie par les heures d'absence.</p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-hr" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Heures r√©elles du mois:</label>
                            <input type="number" id="heures-reelles-hr" class="test-input" value="160">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Heures d'absence:</label>
                            <input type="number" id="heures-absence-hr" class="test-input" value="8">
                            <button onclick="calculerHeuresReelles()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-hr" class="test-result"></div>
                            <div id="justification-hr" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Heures moyennes -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 2 : Heures moyennes du mois (mensualisation)</h4>
                        <p>Cette m√©thode forfaitaire utilise un nombre d'heures moyen par mois (ex. 151,67 h pour un 35 h) pour le calcul.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Heures d'absence / Heures forfaitaires de r√©f√©rence)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-hm" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Heures forfaitaires de r√©f√©rence:</label>
                            <input type="number" id="heures-forfaitaires" class="test-input" value="151.67">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Heures d'absence:</label>
                            <input type="number" id="heures-absence-hm" class="test-input" value="8">
                            <button onclick="calculerHeuresMoyennes()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-hm" class="test-result"></div>
                            <div id="justification-hm" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Jours ouvr√©s r√©els -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 3 : Jours ouvr√©s r√©els</h4>
                        <p>Le d√©compte se base sur les jours o√π l'entreprise est ouverte (lundi au vendredi, hors jours f√©ri√©s).</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Jours d'absence / Nombre r√©el de jours ouvr√©s du mois)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-jor" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre r√©el de jours ouvr√©s du mois:</label>
                            <input type="number" id="jours-ouvres-reels" class="test-input" value="22">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Jours d'absence:</label>
                            <input type="number" id="jours-absence-jor" class="test-input" value="1">
                            <button onclick="calculerJoursOuvresReels()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-jor" class="test-result"></div>
                            <div id="justification-jor" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Jours ouvr√©s moyens -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 4 : Jours ouvr√©s moyens</h4>
                        <p>Cette m√©thode standardise le calcul sur une base forfaitaire de 21,67 jours ouvr√©s par mois.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Jours d'absence / 21.67)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-jom" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Jours d'absence:</label>
                            <input type="number" id="jours-absence-jom" class="test-input" value="1">
                            <button onclick="calculerJoursOuvresMoyens()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-jom" class="test-result"></div>
                            <div id="justification-jom" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Jours ouvrables r√©els -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 5 : Jours ouvrables r√©els</h4>
                        <p>Cette m√©thode prend en compte le nombre r√©el de jours ouvrables du mois (lundi au samedi, hors jours f√©ri√©s).</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Jours d'absence / Nombre r√©el de jours ouvrables du mois)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-jlr" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre r√©el de jours ouvrables du mois:</label>
                            <input type="number" id="jours-ouvrables-reels" class="test-input" value="26">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Jours d'absence:</label>
                            <input type="number" id="jours-absence-jlr" class="test-input" value="1">
                            <button onclick="calculerJoursOuvrablesReels()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-jlr" class="test-result"></div>
                            <div id="justification-jlr" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Jours ouvrables moyens -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 6 : Jours ouvrables moyens</h4>
                        <p>Utilise un forfait de 26 jours ouvrables par mois, souvent utilis√© pour le calcul des cong√©s pay√©s.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Jours d'absence / 26)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-jlm" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Jours d'absence:</label>
                            <input type="number" id="jours-absence-jlm" class="test-input" value="1">
                            <button onclick="calculerJoursOuvrablesMoyens()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-jlm" class="test-result"></div>
                            <div id="justification-jlm" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Jours calendaires r√©els -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 7 : Jours calendaires r√©els</h4>
                        <p>Cette m√©thode compte tous les jours du mois, y compris les week-ends et jours f√©ri√©s.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Jours d'absence / Nombre r√©el de jours calendaires du mois)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-jcr" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre r√©el de jours calendaires du mois:</label>
                            <input type="number" id="jours-calendaires-reels" class="test-input" value="30">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Jours d'absence:</label>
                            <input type="number" id="jours-absence-jcr" class="test-input" value="1">
                            <button onclick="calculerJoursCalendairesReels()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-jcr" class="test-result"></div>
                            <div id="justification-jcr" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Jours calendaires moyens -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">M√©thode 8 : Jours calendaires moyens (M√©thode du 30·µâ)</h4>
                        <p>Une m√©thode simple et forfaitaire, qui utilise une base de 30 jours, quel que soit le mois.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Salaire mensuel √ó (Jours d'absence / 30)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-mensuel-jcm" class="test-input" value="2500">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Jours d'absence:</label>
                            <input type="number" id="jours-absence-jcm" class="test-input" value="1">
                            <button onclick="calculerJoursCalendairesMoyens()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-jcm" class="test-result"></div>
                            <div id="justification-jcm" class="justification-box hidden"></div>
                        </div>
                    </div>
                    <hr>
                    <!-- Forfait jour -->
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-orange-700">Forfait jour</h4>
                        <p>Pour les cadres au forfait jour, la retenue pour absence se fait sur la valeur d'une journ√©e de travail. La m√©thode la plus courante est la valorisation de l'absence sur le nombre de jours ouvr√©s du mois.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Valeur d'une journ√©e = Salaire Annuel / Nombre de jours du forfait
                        </p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Retenue = Valeur d'une journ√©e x Nombre de jours d'absence
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire Annuel (‚Ç¨):</label>
                            <input type="number" id="salaire-annuel-forfait" class="test-input" value="45000">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre de jours du forfait (ex: 218):</label>
                            <input type="number" id="jours-forfait" class="test-input" value="218">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre de jours d'absence:</label>
                            <input type="number" id="jours-absence-forfait" class="test-input" value="5">
                            <button onclick="calculerRetenueForfaitJour()" class="test-button">Calculer la retenue</button>
                            <div id="resultat-forfait" class="test-result"></div>
                            <div id="justification-forfait" class="justification-box hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: IJSS (Indemnit√©s Journali√®res de S√©curit√© Sociale) -->
            <div class="accordion-item" id="accordion-item-4">
                <div class="accordion-header flex justify-between items-center bg-amber-50 hover:bg-amber-100">
                    <h3 class="text-xl font-bold text-amber-700">4. IJSS (Indemnit√©s Journali√®res)</h3>
                    <svg class="chevron-down w-6 h-6 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="accordion-content">
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-amber-700">IJSS maladie non professionnelle</h4>
                        <p>Elles sont vers√©es apr√®s 3 jours de carence. Elles correspondent √† 50% du salaire journalier de r√©f√©rence (SJR), calcul√© sur les 3 derniers mois de salaire brut, dans la limite de 1,8 SMIC mensuels.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            IJSS Brutes = (Somme des salaires bruts des 3 derniers mois / 91,25) x 50%
                        </p>
                        <hr>
                        <h4 class="font-bold text-amber-700">IJSS autres motifs</h4>
                        <p>Pour les IJSS sp√©cifiques, le calcul est adapt√© en fonction du motif :</p>
                        <ul class="list-disc list-inside">
                            <li><strong>Maternit√©, Paternit√©, Adoption :</strong> 100% du SJR, vers√©es sans d√©lai de carence.</li>
                            <li><strong>Accident du travail ou Maladie professionnelle :</strong> 60% du SJR les 28 premiers jours, puis 80% ensuite, sans d√©lai de carence.</li>
                        </ul>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            IJSS Brutes = (Salaire journalier de r√©f√©rence) x Taux
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Type d'absence:</label>
                            <select id="type-ijss" class="test-input">
                                <option value="maladie">Maladie (non pro.)</option>
                                <option value="atmp">Accident du travail / Maladie pro.</option>
                                <option value="matpatadop">Maternit√© / Paternit√© / Adoption</option>
                            </select>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Somme des salaires bruts de r√©f√©rence (‚Ç¨):</label>
                            <input type="number" id="salaire-ref" class="test-input" value="6000">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre de jours d'absence:</label>
                            <input type="number" id="jours-absence-ijss" class="test-input" value="10">
                            <button onclick="calculerIJSS()" class="test-button">Calculer les IJSS</button>
                            <div id="resultat-ijss" class="test-result"></div>
                            <div id="justification-ijss" class="justification-box hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nouvelle Section 5: Maintien de salaire l√©gal -->
            <div class="accordion-item" id="accordion-item-5">
                <div class="accordion-header flex justify-between items-center bg-violet-50 hover:bg-violet-100">
                    <h3 class="text-xl font-bold text-violet-700">5. Maintien de salaire l√©gal</h3>
                    <svg class="chevron-down w-6 h-6 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="accordion-content">
                    <div class="prose max-w-none text-gray-700">
                        <p>Selon l‚Äôarticle L1226-1 du Code du travail, l‚Äôemployeur doit compl√©ter les indemnit√©s journali√®res de la S√©curit√© sociale (IJSS) afin d‚Äôassurer au salari√© une r√©mun√©ration minimale, sous certaines conditions.</p>
                        <h4 class="font-bold text-violet-700">Conditions pour b√©n√©ficier du maintien l√©gal</h4>
                        <ul class="list-disc list-inside">
                            <li>Avoir au moins 1 an d‚Äôanciennet√© dans l‚Äôentreprise (au premier jour de l‚Äôabsence).</li>
                            <li>Avoir transmis √† l‚Äôemployeur le certificat m√©dical dans les 48 heures.</li>
                            <li>B√©n√©ficier des indemnit√©s journali√®res de la S√©curit√© sociale.</li>
                            <li>Ne pas √™tre un salari√© saisonnier, intermittent ou temporaire.</li>
                        </ul>
                        <hr>
                        <h4 class="font-bold text-violet-700">Formule du maintien l√©gal</h4>
                        <p>Le salari√© per√ßoit une indemnit√© compl√©mentaire qui, ajout√©e aux IJSS, permet d‚Äôatteindre une partie de son salaire brut habituel.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Montant du compl√©ment = (% du salaire de r√©f√©rence) - IJSS journali√®res
                        </p>
                        <p><strong>Salaire de r√©f√©rence :</strong> La moyenne brute des 3 mois pr√©c√©dant l‚Äôarr√™t (ou 12 si plus favorable).</p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Salaire brut moyen mensuel (‚Ç¨):</label>
                            <input type="number" id="salaire-brut-moyen" class="test-input" value="3000">
                            <label class="block text-sm font-medium text-gray-700 mt-2">IJSS journali√®res (‚Ç¨):</label>
                            <input type="number" id="ijss-journalieres" class="test-input" value="50">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre de jours d'arr√™t:</label>
                            <input type="number" id="jours-arret" class="test-input" value="10">
                            <button onclick="calculerMaintienSalaire()" class="test-button">Calculer le maintien</button>
                            <div id="resultat-maintien" class="test-result"></div>
                            <div id="justification-maintien" class="justification-box hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 6: Avantages en nature -->
            <div class="accordion-item" id="accordion-item-6">
                <div class="accordion-header flex justify-between items-center bg-stone-50 hover:bg-stone-100">
                    <h3 class="text-xl font-bold text-stone-700">6. Avantages en nature</h3>
                    <svg class="chevron-down w-6 h-6 text-stone-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="accordion-content">
                    <div class="prose max-w-none text-gray-700">
                        <h4 class="font-bold text-stone-700">Logement</h4>
                        <p>L'√©valuation forfaitaire se base sur le salaire brut et le nombre de pi√®ces du logement. Un bar√®me est mis √† jour chaque ann√©e par l'URSSAF.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Valeur Forfaitaire = Montant du bar√®me par pi√®ce x Nombre de pi√®ces
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul (Logement)</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">Montant du bar√®me par pi√®ce (‚Ç¨):</label>
                            <input type="number" id="montant-logement" class="test-input" value="80">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre de pi√®ces:</label>
                            <input type="number" id="nombre-pieces" class="test-input" value="3">
                            <button onclick="calculerAvantageLogement()" class="test-button">Calculer la valeur</button>
                            <div id="resultat-logement" class="test-result"></div>
                            <div id="justification-logement" class="justification-box hidden"></div>
                        </div>
                        <hr>
                        <h4 class="font-bold text-stone-700">Nourriture</h4>
                        <p>L'√©valuation forfaitaire est fix√©e annuellement par l'URSSAF, sauf si le salari√© paie au moins la moiti√© de l'√©valuation forfaitaire.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Avantage en nature nourriture = (√âvaluation forfaitaire - Participation du salari√©) x Nombre de repas
                        </p>
                         <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul (Nourriture)</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">√âvaluation forfaitaire (‚Ç¨):</label>
                            <input type="number" id="eval-forfaitaire" class="test-input" value="5.35">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Participation du salari√© (‚Ç¨):</label>
                            <input type="number" id="participation-salarie" class="test-input" value="2">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Nombre de repas:</label>
                            <input type="number" id="nombre-repas" class="test-input" value="20">
                            <button onclick="calculerAvantageNourriture()" class="test-button">Calculer la valeur</button>
                            <div id="resultat-nourriture" class="test-result"></div>
                            <div id="justification-nourriture" class="justification-box hidden"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 7: R√©duction g√©n√©rale des cotisations (ex-Fillon) -->
            <div class="accordion-item" id="accordion-item-7">
                <div class="accordion-header flex justify-between items-center bg-green-50 hover:bg-green-100">
                    <h3 class="text-xl font-bold text-green-700">7. R√©duction G√©n√©rale de Cotisations (RGCP)</h3>
                    <svg class="chevron-down w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="accordion-content">
                    <div class="prose max-w-none text-gray-700">
                        <p>Cette r√©duction s'applique aux salaires inf√©rieurs √† 1,6 fois le SMIC. Elle est calcul√©e via un coefficient. Le montant de la r√©duction est la r√©mun√©ration brute multipli√©e par ce coefficient.</p>
                        <p class="font-mono bg-gray-100 p-2 rounded-md">
                            Coefficient = (T / 0.6) x ((1.6 x SMIC Annuel) / R√©mun√©ration Annuelle Brute - 1)
                        </p>
                        <div class="test-section">
                            <h4 class="text-orange-600 font-bold mb-2">Tester le calcul</h4>
                            <label class="block text-sm font-medium text-gray-700 mt-2">R√©mun√©ration Annuelle Brute (‚Ç¨):</label>
                            <input type="number" id="remuneration-annuelle" class="test-input" value="22000">
                            <label class="block text-sm font-medium text-gray-700 mt-2">SMIC Annuel (‚Ç¨):</label>
                            <input type="number" id="smic-annuel" class="test-input" value="21203.47">
                            <label class="block text-sm font-medium text-gray-700 mt-2">Valeur T (taux de cotisations patronales):</label>
                            <input type="number" id="valeur-t" class="test-input" value="0.3194">
                            <button onclick="calculerRGCP()" class="test-button">Calculer le coefficient</button>
                            <div id="resultat-rgcp" class="test-result"></div>
                            <div id="justification-rgcp" class="justification-box hidden"></div>
                        </div>
                    </div>
                </div>
            </div>
            
        </main>
    </div>

    <script>
        // Gestion des accordions
        document.addEventListener('DOMContentLoaded', () => {
            const accordionItems = document.querySelectorAll('.accordion-item');
            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                header.addEventListener('click', () => {
                    item.classList.toggle('active');
                    content.classList.toggle('active');
                });
            });
        });

        // Fonction pour calculer le salaire de base
        function calculerSalaire() {
            const heuresHebdo = parseFloat(document.getElementById('heures-hebdo').value);
            const tauxHoraire = parseFloat(document.getElementById('taux-horaire').value);
            const resultatDiv = document.getElementById('resultat-salaire');
            const justificationDiv = document.getElementById('justification-salaire');

            const heuresMensuelles = (heuresHebdo * 52) / 12;
            const salaireBase = heuresMensuelles * tauxHoraire;

            resultatDiv.innerHTML = `
                <p><strong>Heures mensuelles moyennes:</strong> ${heuresMensuelles.toFixed(2)} h</p>
                <p><strong>Salaire de base:</strong> ${salaireBase.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>Pour obtenir un salaire de base fiable, on utilise la formule de la mensualisation, qui uniformise la r√©mun√©ration tout au long de l'ann√©e. On prend le nombre d'heures hebdomadaires, on le multiplie par le nombre de semaines dans l'ann√©e (52) et on divise par le nombre de mois (12). Le r√©sultat est ensuite multipli√© par le taux horaire du salari√©.</p>
                <p><strong>Calcul :</strong><br>
                Heures Mensuelles = (${heuresHebdo} h x 52) / 12 = ${heuresMensuelles.toFixed(2)} h<br>
                Salaire de base = ${heuresMensuelles.toFixed(2)} h x ${tauxHoraire} ‚Ç¨/h = ${salaireBase.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // Fonction pour calculer les heures compl√©mentaires
        function calculerHeuresComplementaires() {
            const heuresContractuelles = parseFloat(document.getElementById('heures-contractuelles').value);
            const tauxHoraire = parseFloat(document.getElementById('taux-horaire-hc').value);
            const nombreHc = parseFloat(document.getElementById('nombre-hc').value);
            const resultatDiv = document.getElementById('resultat-hc');
            const justificationDiv = document.getElementById('justification-hc');

            let totalHc = 0;
            let justificationText = '';
            const seuil10 = heuresContractuelles * 0.10;
            const seuil33 = heuresContractuelles * (1/3);

            if (nombreHc <= seuil10) {
                totalHc = nombreHc * tauxHoraire * 1.10;
                justificationText = `<p>Les heures compl√©mentaires sont major√©es √† 10% car elles sont inf√©rieures ou √©gales √† 10% de la dur√©e contractuelle (${seuil10.toFixed(2)} h).</p>
                                    <p><strong>Calcul :</strong> ${nombreHc} h x ${tauxHoraire} ‚Ç¨/h x 1.10 = ${totalHc.toFixed(2)} ‚Ç¨</p>`;
            } else if (nombreHc > seuil10 && nombreHc <= seuil33) {
                const heures10 = seuil10;
                const heures25 = nombreHc - seuil10;
                totalHc = (heures10 * tauxHoraire * 1.10) + (heures25 * tauxHoraire * 1.25);
                justificationText = `<p>Le calcul se fait en deux parties : les heures jusqu'au seuil de 10% (${heures10.toFixed(2)} h) sont major√©es √† 10%, et les heures restantes (${heures25.toFixed(2)} h) sont major√©es √† 25%.</p>
                                    <p><strong>Calcul :</strong> (${heures10.toFixed(2)} h x ${tauxHoraire} ‚Ç¨/h x 1.10) + (${heures25.toFixed(2)} h x ${tauxHoraire} ‚Ç¨/h x 1.25) = ${totalHc.toFixed(2)} ‚Ç¨</p>`;
            } else {
                 totalHc = (seuil10 * tauxHoraire * 1.10) + ((seuil33-seuil10) * tauxHoraire * 1.25);
                 justificationText = `<p class="font-bold text-red-600">Attention !</p><p>Le nombre d'heures compl√©mentaires (${nombreHc} h) exc√®de le tiers des heures contractuelles (${seuil33.toFixed(2)} h). La r√©mun√©ration maximale est de ${totalHc.toFixed(2)} ‚Ç¨.</p>`;
            }
            
            resultatDiv.innerText = `R√©mun√©ration pour les heures compl√©mentaires: ${totalHc.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `<h4 class="font-bold text-purple-700">Justification du calcul :</h4>` + justificationText;
            justificationDiv.classList.remove('hidden');
        }

        // Fonction pour calculer les heures suppl√©mentaires
        function calculerHeuresSupplementaires() {
            const heuresTotales = parseFloat(document.getElementById('heures-totales-hs').value);
            const tauxHoraire = parseFloat(document.getElementById('taux-horaire-hs').value);
            const resultatDiv = document.getElementById('resultat-hs');
            const justificationDiv = document.getElementById('justification-hs');

            const heuresLegales = 35;
            let totalHs = 0;
            let justificationText = '';

            if (heuresTotales > heuresLegales) {
                const heuresSupp = heuresTotales - heuresLegales;
                if (heuresSupp <= 8) {
                    totalHs = heuresSupp * tauxHoraire * 1.25;
                    justificationText = `<p>Les heures suppl√©mentaires sont major√©es √† 25% car elles sont comprises entre la 36√®me et la 43√®me heure (soit jusqu'√† 8 heures suppl√©mentaires).</p>
                                        <p><strong>Calcul :</strong> ${heuresSupp} h x ${tauxHoraire} ‚Ç¨/h x 1.25 = ${totalHs.toFixed(2)} ‚Ç¨</p>`;
                } else {
                    const heures25 = 8;
                    const heures50 = heuresSupp - 8;
                    totalHs = (heures25 * tauxHoraire * 1.25) + (heures50 * tauxHoraire * 1.50);
                    justificationText = `<p>Le calcul se fait en deux parties : les 8 premi√®res heures suppl√©mentaires sont major√©es √† 25%, et les heures suivantes (${heures50} h) sont major√©es √† 50%.</p>
                                        <p><strong>Calcul :</strong> (${heures25} h x ${tauxHoraire} ‚Ç¨/h x 1.25) + (${heures50} h x ${tauxHoraire} ‚Ç¨/h x 1.50) = ${totalHs.toFixed(2)} ‚Ç¨</p>`;
                }
            } else {
                justificationText = `<p>Il n'y a pas d'heures suppl√©mentaires, car les heures totales travaill√©es sont inf√©rieures ou √©gales √† 35 heures.</p>`;
            }
            resultatDiv.innerText = `R√©mun√©ration pour les heures suppl√©mentaires: ${totalHs.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `<h4 class="font-bold text-purple-700">Justification du calcul :</h4>` + justificationText;
            justificationDiv.classList.remove('hidden');
        }

        // --- Fonctions de calcul pour les 8 m√©thodes de d√©compte des absences ---

        // 1. Heures r√©elles
        function calculerHeuresReelles() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-hr').value);
            const heuresReelles = parseFloat(document.getElementById('heures-reelles-hr').value);
            const heuresAbsence = parseFloat(document.getElementById('heures-absence-hr').value);
            const resultatDiv = document.getElementById('resultat-hr');
            const justificationDiv = document.getElementById('justification-hr');
            
            if (heuresReelles === 0) {
                resultatDiv.innerText = "Erreur : le nombre d'heures r√©elles ne peut pas √™tre z√©ro.";
                justificationDiv.classList.add('hidden');
                return;
            }

            const retenue = (salaire / heuresReelles) * heuresAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>Cette m√©thode est la plus juste car elle se base sur le nombre exact d'heures qui auraient d√ª √™tre travaill√©es dans le mois. La retenue est proportionnelle au temps d'absence.</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${heuresReelles} h) √ó ${heuresAbsence} h = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // 2. Heures moyennes
        function calculerHeuresMoyennes() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-hm').value);
            const heuresForfaitaires = parseFloat(document.getElementById('heures-forfaitaires').value);
            const heuresAbsence = parseFloat(document.getElementById('heures-absence-hm').value);
            const resultatDiv = document.getElementById('resultat-hm');
            const justificationDiv = document.getElementById('justification-hm');
            
            if (heuresForfaitaires === 0) {
                resultatDiv.innerText = "Erreur : les heures forfaitaires ne peuvent pas √™tre z√©ro.";
                justificationDiv.classList.add('hidden');
                return;
            }

            const retenue = (salaire / heuresForfaitaires) * heuresAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>La retenue est calcul√©e sur la base d'un forfait d'heures mensuelles (ex. 151,67 h) pour simplifier le calcul.</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${heuresForfaitaires} h) √ó ${heuresAbsence} h = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // 3. Jours ouvr√©s r√©els
        function calculerJoursOuvresReels() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-jor').value);
            const joursReels = parseFloat(document.getElementById('jours-ouvres-reels').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-jor').value);
            const resultatDiv = document.getElementById('resultat-jor');
            const justificationDiv = document.getElementById('justification-jor');
            
            if (joursReels === 0) {
                resultatDiv.innerText = "Erreur : le nombre de jours ouvr√©s r√©els ne peut pas √™tre z√©ro.";
                justificationDiv.classList.add('hidden');
                return;
            }

            const retenue = (salaire / joursReels) * joursAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>La retenue est calcul√©e en fonction du nombre r√©el de jours o√π l'entreprise est normalement ouverte ce mois-ci (jours ouvr√©s).</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${joursReels} jours) √ó ${joursAbsence} jours = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // 4. Jours ouvr√©s moyens
        function calculerJoursOuvresMoyens() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-jom').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-jom').value);
            const joursMoyens = 21.67;
            const resultatDiv = document.getElementById('resultat-jom');
            const justificationDiv = document.getElementById('justification-jom');

            const retenue = (salaire / joursMoyens) * joursAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>La retenue est calcul√©e sur une base forfaitaire de 21,67 jours ouvr√©s par mois, ce qui permet de standardiser le calcul.</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${joursMoyens} jours) √ó ${joursAbsence} jours = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // 5. Jours ouvrables r√©els
        function calculerJoursOuvrablesReels() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-jlr').value);
            const joursReels = parseFloat(document.getElementById('jours-ouvrables-reels').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-jlr').value);
            const resultatDiv = document.getElementById('resultat-jlr');
            const justificationDiv = document.getElementById('justification-jlr');
            
            if (joursReels === 0) {
                resultatDiv.innerText = "Erreur : le nombre de jours ouvrables r√©els ne peut pas √™tre z√©ro.";
                justificationDiv.classList.add('hidden');
                return;
            }
            
            const retenue = (salaire / joursReels) * joursAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>Cette m√©thode se base sur le nombre exact de jours qui peuvent √™tre l√©galement travaill√©s ce mois-ci (lundi au samedi).</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${joursReels} jours) √ó ${joursAbsence} jours = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // 6. Jours ouvrables moyens
        function calculerJoursOuvrablesMoyens() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-jlm').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-jlm').value);
            const joursMoyens = 26;
            const resultatDiv = document.getElementById('resultat-jlm');
            const justificationDiv = document.getElementById('justification-jlm');

            const retenue = (salaire / joursMoyens) * joursAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>La retenue est calcul√©e sur une base forfaitaire de 26 jours ouvrables par mois, ce qui est une m√©thode simple souvent utilis√©e.</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${joursMoyens} jours) √ó ${joursAbsence} jours = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // 7. Jours calendaires r√©els
        function calculerJoursCalendairesReels() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-jcr').value);
            const joursReels = parseFloat(document.getElementById('jours-calendaires-reels').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-jcr').value);
            const resultatDiv = document.getElementById('resultat-jcr');
            const justificationDiv = document.getElementById('justification-jcr');

            if (joursReels === 0) {
                resultatDiv.innerText = "Erreur : le nombre de jours calendaires r√©els ne peut pas √™tre z√©ro.";
                justificationDiv.classList.add('hidden');
                return;
            }

            const retenue = (salaire / joursReels) * joursAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>Cette m√©thode prend en compte le nombre total de jours du mois (week-ends et jours f√©ri√©s inclus) pour calculer la retenue.</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${joursReels} jours) √ó ${joursAbsence} jours = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // 8. Jours calendaires moyens (M√©thode du 30·µâ)
        function calculerJoursCalendairesMoyens() {
            const salaire = parseFloat(document.getElementById('salaire-mensuel-jcm').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-jcm').value);
            const joursMoyens = 30;
            const resultatDiv = document.getElementById('resultat-jcm');
            const justificationDiv = document.getElementById('justification-jcm');

            const retenue = (salaire / joursMoyens) * joursAbsence;
            resultatDiv.innerText = `Retenue pour absence : ${retenue.toFixed(2)} ‚Ç¨`;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>C'est une m√©thode forfaitaire et tr√®s simple, qui part du principe que tous les mois comptent 30 jours pour le calcul des absences.</p>
                <p><strong>Calcul :</strong><br>
                (${salaire} ‚Ç¨ / ${joursMoyens} jours) √ó ${joursAbsence} jours = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // Fonction pour calculer la retenue pour absence (forfait jour)
        function calculerRetenueForfaitJour() {
            const salaireAnnuel = parseFloat(document.getElementById('salaire-annuel-forfait').value);
            const joursForfait = parseFloat(document.getElementById('jours-forfait').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-forfait').value);
            const resultatDiv = document.getElementById('resultat-forfait');
            const justificationDiv = document.getElementById('justification-forfait');

            if (joursForfait === 0) {
                resultatDiv.innerText = "Erreur: Le nombre de jours du forfait ne peut pas √™tre z√©ro.";
                justificationDiv.classList.add('hidden');
                return;
            }

            const valeurJour = salaireAnnuel / joursForfait;
            const retenue = valeurJour * joursAbsence;
            resultatDiv.innerText = `Retenue pour absence: ${retenue.toFixed(2)} ‚Ç¨`;

            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>Pour les salari√©s en forfait jour, la retenue est calcul√©e en fonction de la valeur d'une journ√©e de travail. Cette valeur est obtenue en divisant le salaire annuel par le nombre de jours de travail pr√©vus au forfait. La retenue correspond √† cette valeur multipli√©e par le nombre de jours d'absence.</p>
                <p><strong>Calcul :</strong><br>
                Valeur d'une journ√©e = ${salaireAnnuel} ‚Ç¨ / ${joursForfait} jours = ${valeurJour.toFixed(2)} ‚Ç¨<br>
                Retenue = ${valeurJour.toFixed(2)} ‚Ç¨ x ${joursAbsence} jours = ${retenue.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }


        // Fonction pour calculer les IJSS (tous les motifs)
        function calculerIJSS() {
            const typeIJSS = document.getElementById('type-ijss').value;
            const salaireRef = parseFloat(document.getElementById('salaire-ref').value);
            const joursAbsence = parseFloat(document.getElementById('jours-absence-ijss').value);
            const resultatDiv = document.getElementById('resultat-ijss');
            const justificationDiv = document.getElementById('justification-ijss');

            let sjr, ijssJournalieres, totalIJSS, carence, explication;
            
            // Calcul du Salaire Journalier de R√©f√©rence (SJR)
            if (typeIJSS === 'maladie') {
                sjr = salaireRef / 91.25;
            } else if (typeIJSS === 'atmp' || typeIJSS === 'matpatadop') {
                // Simplification : le SJR est la moyenne des 12 derniers mois de salaire brut, plafonn√©
                // Ici, on utilise le salaireRef fourni pour simplifier
                sjr = salaireRef / 365.25;
            }
            
            switch(typeIJSS) {
                case 'maladie':
                    carence = 3;
                    ijssJournalieres = sjr * 0.50;
                    totalIJSS = (joursAbsence > carence) ? ijssJournalieres * (joursAbsence - carence) : 0;
                    explication = `<p>Les IJSS maladie non professionnelle sont vers√©es apr√®s un d√©lai de carence de 3 jours et correspondent √† 50% du salaire journalier de r√©f√©rence (SJR).</p>`;
                    break;
                case 'atmp':
                    carence = 0;
                    // Les 28 premiers jours sont √† 60%
                    if (joursAbsence <= 28) {
                        ijssJournalieres = sjr * 0.60;
                        totalIJSS = ijssJournalieres * joursAbsence;
                        explication = `<p>Les IJSS pour un accident du travail ou une maladie professionnelle sont vers√©es sans d√©lai de carence et correspondent √† 60% du SJR pour les 28 premiers jours.</p>`;
                    } else {
                        // Au-del√† de 28 jours, le taux passe √† 80%
                        const ijss28Jours = (sjr * 0.60) * 28;
                        const joursRestants = joursAbsence - 28;
                        const ijssJoursRestants = (sjr * 0.80) * joursRestants;
                        totalIJSS = ijss28Jours + ijssJoursRestants;
                        ijssJournalieres = "Variable (60% puis 80%)";
                        explication = `<p>Les IJSS pour un accident du travail ou une maladie professionnelle sont vers√©es sans d√©lai de carence, √† un taux de 60% pour les 28 premiers jours, puis √† 80% √† partir du 29√®me jour.</p>`;
                    }
                    break;
                case 'matpatadop':
                    carence = 0;
                    // Maternit√©, Paternit√©, Adoption sont √† 100% du SJR
                    ijssJournalieres = sjr;
                    totalIJSS = ijssJournalieres * joursAbsence;
                    explication = `<p>Les IJSS pour la maternit√©, la paternit√© ou l'adoption sont vers√©es sans d√©lai de carence et correspondent √† 100% du salaire journalier de r√©f√©rence (SJR).</p>`;
                    break;
            }

            resultatDiv.innerHTML = `
                <p><strong>Salaire Journalier de R√©f√©rence:</strong> ${sjr.toFixed(2)} ‚Ç¨</p>
                <p><strong>IJSS Journali√®res:</strong> ${typeof ijssJournalieres === 'number' ? ijssJournalieres.toFixed(2) + ' ‚Ç¨' : ijssJournalieres}</p>
                <p><strong>Total IJSS (apr√®s carence):</strong> ${totalIJSS.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                ${explication}
                <p><strong>Calcul :</strong><br>
                SJR = ${salaireRef} ‚Ç¨ / ${typeIJSS === 'maladie' ? '91,25' : '365,25'} jours = ${sjr.toFixed(2)} ‚Ç¨<br>
                Total IJSS = ${totalIJSS.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // Nouvelle fonction pour calculer le maintien de salaire
        function calculerMaintienSalaire() {
            const salaireBrutMoyen = parseFloat(document.getElementById('salaire-brut-moyen').value);
            const ijssJournalieres = parseFloat(document.getElementById('ijss-journalieres').value);
            const joursArret = parseInt(document.getElementById('jours-arret').value, 10);
            const resultatDiv = document.getElementById('resultat-maintien');
            const justificationDiv = document.getElementById('justification-maintien');

            const salaireJournalierBrut = salaireBrutMoyen / 30; // Salaire de r√©f√©rence journalier

            let pourcentageSalaire, montantComplement, revenuTotal;
            let explication = "";

            if (joursArret > 7) {
                if (joursArret >= 8 && joursArret <= 30) {
                    pourcentageSalaire = 0.90; // 90%
                    montantComplement = (salaireJournalierBrut * pourcentageSalaire) - ijssJournalieres;
                    revenuTotal = (salaireJournalierBrut * pourcentageSalaire);
                    explication = `Du 8√®me au 30√®me jour d'arr√™t, le salari√© per√ßoit 90% de son salaire brut de r√©f√©rence. Le compl√©ment de l'employeur s'ajoute aux IJSS.`;
                } else if (joursArret > 30 && joursArret <= 90) {
                    pourcentageSalaire = 0.6666; // 66.66% (2/3)
                    montantComplement = (salaireJournalierBrut * pourcentageSalaire) - ijssJournalieres;
                    revenuTotal = (salaireJournalierBrut * pourcentageSalaire);
                    explication = `√Ä partir du 31√®me jour, le maintien de salaire l√©gal passe √† 66.66% du salaire brut de r√©f√©rence. Le compl√©ment de l'employeur s'ajoute aux IJSS.`;
                } else {
                    explication = "Le calcul l√©gal s'arr√™te au 90√®me jour, ou les pourcentages changent. Veuillez consulter la convention collective pour plus d'informations.";
                    montantComplement = 0;
                    revenuTotal = 0;
                }
            } else {
                explication = "Le maintien de salaire l√©gal commence √† partir du 8√®me jour d'arr√™t maladie. Avant cela, le salari√© per√ßoit uniquement les IJSS (apr√®s le d√©lai de carence).";
                montantComplement = 0;
                revenuTotal = ijssJournalieres;
            }

            resultatDiv.innerHTML = `
                <p><strong>Salaire journalier brut de r√©f√©rence:</strong> ${salaireJournalierBrut.toFixed(2)} ‚Ç¨</p>
                <p><strong>Compl√©ment employeur journalier:</strong> ${montantComplement.toFixed(2)} ‚Ç¨</p>
                <p><strong>Revenu total journalier:</strong> ${revenuTotal.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>${explication}</p>
                <p><strong>Calcul :</strong><br>
                Salaire journalier de r√©f√©rence = ${salaireBrutMoyen} ‚Ç¨ / 30 jours = ${salaireJournalierBrut.toFixed(2)} ‚Ç¨<br>
                Compl√©ment = (${salaireJournalierBrut.toFixed(2)} ‚Ç¨ x ${pourcentageSalaire * 100}%) - ${ijssJournalieres} ‚Ç¨ = ${montantComplement.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // Fonction pour calculer les avantages en nature (logement)
        function calculerAvantageLogement() {
            const montant = parseFloat(document.getElementById('montant-logement').value);
            const pieces = parseFloat(document.getElementById('nombre-pieces').value);
            const resultatDiv = document.getElementById('resultat-logement');
            const justificationDiv = document.getElementById('justification-logement');

            const valeur = montant * pieces;
            resultatDiv.innerText = `Valeur de l'avantage en nature (Logement): ${valeur.toFixed(2)} ‚Ç¨`;
            
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>Le calcul de l'avantage en nature pour un logement se fait en utilisant la m√©thode forfaitaire, bas√©e sur un bar√®me fourni par l'URSSAF. Ce bar√®me prend en compte le niveau de r√©mun√©ration du salari√© et le nombre de pi√®ces du logement.</p>
                <p><strong>Calcul :</strong><br>
                Valeur de l'avantage = ${montant} ‚Ç¨/pi√®ce x ${pieces} pi√®ces = ${valeur.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // Fonction pour calculer les avantages en nature (nourriture)
        function calculerAvantageNourriture() {
            const evalForfaitaire = parseFloat(document.getElementById('eval-forfaitaire').value);
            const participation = parseFloat(document.getElementById('participation-salarie').value);
            const repas = parseFloat(document.getElementById('nombre-repas').value);
            const resultatDiv = document.getElementById('resultat-nourriture');
            const justificationDiv = document.getElementById('justification-nourriture');
            
            const valeur = (evalForfaitaire - participation) * repas;
            resultatDiv.innerText = `Valeur de l'avantage en nature (Nourriture): ${valeur.toFixed(2)} ‚Ç¨`;

            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>L'avantage en nature pour la nourriture est calcul√© en se basant sur une √©valuation forfaitaire annuelle, d√©duction faite de la participation du salari√©. Ce montant est ensuite multipli√© par le nombre de repas pris.</p>
                <p><strong>Calcul :</strong><br>
                Valeur par repas = ${evalForfaitaire.toFixed(2)} ‚Ç¨ - ${participation.toFixed(2)} ‚Ç¨ = ${(evalForfaitaire - participation).toFixed(2)} ‚Ç¨<br>
                Valeur totale = ${(evalForfaitaire - participation).toFixed(2)} ‚Ç¨ x ${repas} repas = ${valeur.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }

        // Fonction pour calculer la RGCP
        function calculerRGCP() {
            const remunerationAnnuelle = parseFloat(document.getElementById('remuneration-annuelle').value);
            const smicAnnuel = parseFloat(document.getElementById('smic-annuel').value);
            const valeurT = parseFloat(document.getElementById('valeur-t').value);
            const resultatDiv = document.getElementById('resultat-rgcp');
            const justificationDiv = document.getElementById('justification-rgcp');

            const coefficient = (valeurT / 0.6) * (((1.6 * smicAnnuel) / remunerationAnnuelle) - 1);
            const reduction = remunerationAnnuelle * coefficient;

            resultatDiv.innerHTML = `
                <p><strong>Coefficient:</strong> ${coefficient.toFixed(4)}</p>
                <p><strong>Montant de la r√©duction:</strong> ${reduction.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.innerHTML = `
                <h4 class="font-bold text-purple-700">Justification du calcul :</h4>
                <p>La R√©duction G√©n√©rale des Cotisations Patronales (RGCP) est un dispositif qui permet de r√©duire les cotisations pour les bas salaires. Le calcul se base sur un coefficient d√©termin√© par une formule l√©gale qui prend en compte le SMIC annuel et la r√©mun√©ration brute du salari√©.</p>
                <p>Le montant final de la r√©duction est obtenu en multipliant ce coefficient par la r√©mun√©ration annuelle brute.</p>
                <p><strong>Calcul :</strong><br>
                Coefficient = (${valeurT} / 0.6) x (((1.6 x ${smicAnnuel} ‚Ç¨) / ${remunerationAnnuelle} ‚Ç¨) - 1) = ${coefficient.toFixed(4)}<br>
                R√©duction = ${remunerationAnnuelle} ‚Ç¨ x ${coefficient.toFixed(4)} = ${reduction.toFixed(2)} ‚Ç¨</p>
            `;
            justificationDiv.classList.remove('hidden');
        }
    </script>
</body>
</html>
